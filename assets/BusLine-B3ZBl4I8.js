import{f as V,u as W,r as b,g as q,c as I,w as c,a as d,o as y,b as _,d as u,n as L,t as h,h as M,j as R,F as z,i as g,k as D}from"./index-C-0x0Y6P.js";const H="/svgs/bus.svg",U={style:{"white-space":"nowrap","text-align":"center","vertical-align":"center",display:"flex"}},A=_("img",{src:H,style:{height:"30px",width:"30px"}},null,-1),G={style:{color:"#FED053","user-select":"none"}},J=["onClick"],K=["onClick"],X={__name:"BusLine",setup(O){const k=V(),f=W(),p=g("busLinesMap"),S=g("busStationsMap"),T=g("bussesInStations"),m=g("metroBusLinesMap"),w=g("metroBusStationsMap"),i=b(null),B=b([]),x=s=>{let e,a;if(m.has(s))a=m.get(s),e=a.s;else if(p.has(s))a=p.get(s),e=a.s;else{console.error("unknown bus line selected",s,p.has(s),m.has(s));return}if(!e){console.log("stations are empty ???");return}const v=[];for(let o=0;o<e.length;o++){let l;if(w.has(e[o])?l={...w.get(e[o])}:S.has(e[o])&&(l={...S.get(e[o])}),!l){console.error(`station not found ${e[o]} while trying to setup other busses`);continue}l.otherBusses=[];const r=T.get(e[o]);for(let t=0;t<r.length;t++){if(r[t].i===s)continue;let n;if(p.has(r[t].i)?n=p.get(r[t].i):m.has(r[t].i)&&(n=m.get(r[t].i)),!n){console.error("there is no other bus");continue}l.otherBusses.push(n)}v.push(l)}B.value=v,i.value=a,console.log(`displaying stations of bus [${s}] ${i.value.b} with ${B.value.length} stations`)};q(()=>{if(!k.params.busId)return;const s=parseInt(k.params.busId);x(s)});const F=(s,e)=>{s.stopImmediatePropagation(),console.log("onBusNumberClicked",e)},N=(s,e)=>{s.stopImmediatePropagation(),f.push(`/timetable/${e.i}`)},C=b(!0),$=()=>{f.replace({name:"busStations",params:{busId:i.value.si}}),x(i.value.si)},E=()=>{f.push({name:"main"})};return(s,e)=>{const a=d("Tag"),v=d("Button"),o=d("Marquee"),l=d("Timeline"),r=d("Drawer");return y(),I(r,{visible:C.value,"onUpdate:visible":e[0]||(e[0]=t=>C.value=t),onHide:E,style:{"background-color":"#1E232B"}},{header:c(()=>[_("div",U,[u(a,null,{default:c(()=>[A]),_:1}),u(a,{rounded:!0,value:i.value.n,style:L({minWidth:"40px",userSelect:"none",fontFamily:"TheLedDisplaySt",backgroundColor:i.value.c,color:i.value.tc})},null,8,["value","style"]),_("h2",G,h(i.value.b),1),u(v,{icon:"pi pi-backward",onClick:$})])]),default:c(()=>[u(l,{value:B.value,align:"alternate"},{content:c(t=>[_("h3",{onClick:n=>N(n,t.item),style:{color:"#FED053","user-select":"none"}},[_("b",null,h(t.item.n),1)],8,J)]),opposite:c(t=>[u(o,{id:"lineLinksInStation"+t.item.i},{default:c(()=>[(y(!0),M(z,null,R(t.item.otherBusses,n=>(y(),M("div",{style:{"white-space":"nowrap","text-align":"center","vertical-align":"center"},onClick:j=>F(j,t.item)},[D(h(t.item.index)+" ",1),u(a,{rounded:!0,value:n.n,style:L({minWidth:"40px",maxWidth:"40px",userSelect:"none",fontFamily:"TheLedDisplaySt",backgroundColor:n.c,color:n.tc})},null,8,["value","style"]),D(" "+h(n.f)+" - "+h(n.t),1)],8,K))),256))]),_:2},1032,["id"])]),_:1},8,["value"])]),_:1},8,["visible"])}}};export{X as default};
