import{f as T,u as $,r as b,g as E,c as F,w as p,a as h,o as j,b as g,d as m,n as q,t as M,i as d}from"./index-D-TpN3OW.js";const N="/svgs/bus.svg",R={style:{"white-space":"nowrap","text-align":"center","vertical-align":"center",display:"flex"}},V=g("img",{src:N,style:{height:"30px",width:"30px"}},null,-1),z={style:{color:"#FED053","user-select":"none"}},H=["onClick"],W={__name:"BusLine",setup(I){const B=T(),v=$(),u=d("busLinesMap"),y=d("busStationsMap"),L=d("bussesInStations"),c=d("metroBusLinesMap"),S=d("metroBusStationsMap"),o=b(null),f=b([]),w=s=>{let e,i;if(c.has(s))i=c.get(s),e=i.s;else if(u.has(s))i=u.get(s),e=i.s;else{console.error("unknown bus line selected",s,u.has(s),c.has(s));return}if(!e){console.log("stations are empty ???");return}const _=[];for(let n=0;n<e.length;n++){let a;if(S.has(e[n])?a={...S.get(e[n])}:y.has(e[n])&&(a={...y.get(e[n])}),!a){console.error(`station not found ${e[n]} while trying to setup other busses`);continue}a.otherBusses=[];const l=L.get(e[n]);for(let t=0;t<l.length;t++){if(l[t].i===s)continue;let r;if(u.has(l[t].i)?r=u.get(l[t].i):c.has(l[t].i)&&(r=c.get(l[t].i)),!r){console.error("there is no other bus");continue}a.otherBusses.push(r)}_.push(a)}f.value=_,o.value=i,console.log(`displaying stations of bus [${s}] ${o.value.b} with ${f.value.length} stations`)};E(()=>{if(!B.params.busId)return;const s=parseInt(B.params.busId);w(s)});const x=(s,e)=>{s.stopImmediatePropagation(),v.push(`/timetable/${e.i}`)},k=b(!0),C=()=>{v.replace({name:"busStations",params:{busId:o.value.si}}),w(o.value.si)},D=()=>{v.push({name:"main"})};return(s,e)=>{const i=h("Tag"),_=h("Button"),n=h("Marquee"),a=h("Timeline"),l=h("Drawer");return j(),F(l,{visible:k.value,"onUpdate:visible":e[0]||(e[0]=t=>k.value=t),onHide:D,style:{"background-color":"#1E232B"}},{header:p(()=>[g("div",R,[m(i,null,{default:p(()=>[V]),_:1}),m(i,{rounded:!0,value:o.value.n,style:q({minWidth:"40px",userSelect:"none",fontFamily:"TheLedDisplaySt",backgroundColor:o.value.c,color:o.value.tc})},null,8,["value","style"]),g("h2",z,M(o.value.b),1),m(_,{icon:"pi pi-backward",onClick:C})])]),default:p(()=>[m(a,{value:f.value,align:"alternate"},{content:p(t=>[g("h3",{onClick:r=>x(r,t.item),style:{color:"#FED053","user-select":"none"}},[g("b",null,M(t.item.n),1)],8,H)]),opposite:p(t=>[m(n,{id:"lineLinksInStation"+t.item.i,items:t.item.otherBusses},null,8,["id","items"])]),_:1},8,["value"])]),_:1},8,["visible"])}}};export{W as default};
